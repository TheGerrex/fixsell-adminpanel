<!-- Role Selector -->
<div class="form-item half-row">
  <mat-form-field appearance="outline">
    <mat-label>Rol</mat-label>
    <mat-select
      [(ngModel)]="selectedRoleId"
      (selectionChange)="onRoleChange($event.value)"
    >
      <mat-option *ngFor="let rol of roles" [value]="rol.id">
        {{ rol.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <button
    type="button"
    class="button button-secondary"
    (click)="newRole()"
    style="margin-top: 0.5rem"
  >
    <mat-icon>add</mat-icon>
    <span class="button-label">Crear nuevo rol</span>
  </button>
</div>

<!-- Permissions Card -->
<div class="permissions-card section-card" *ngIf="selectedRoleId">
  <div class="section-card-header border-bottom">
    <h3 class="header-title">
      Permisos de {{ selectedRoleName || 'Rol no seleccionado' }}
    </h3>
  </div>
  <div class="section-card-body">
    <!-- Pass permissionId to PermissionsComponent -->
    <app-permissions
      [permissionId]="selectedPermissionId"
      (permissionsChange)="onPermissionsChange($event)"
    ></app-permissions>
  </div>
</div>
