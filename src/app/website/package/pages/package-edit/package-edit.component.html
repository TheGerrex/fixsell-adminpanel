<div>
  <form
    [formGroup]="editPackageForm"
    class="packages-container"
    *ngIf="editPackageForm"
  >
    <div class="packages-header">
      <h2>Crear Package</h2>
      <button
        type="submit"
        class="button button-primary button-raised"
        (click)="submitForm()"
      >
        <span class="button-label">Agregar Package</span>
      </button>
    </div>
    <div class="packages-info">
      <div class="packages-data-container">
        <div class="packages-data">
          <div class="packages-data-item">
            <h5>Printer</h5>
            <mat-form-field>
              <input
                type="text"
                placeholder="Select a printer"
                aria-label="Number"
                matInput
                [formControl]="printerControl"
                [matAutocomplete]="auto"
              />
              <mat-autocomplete #auto="matAutocomplete">
                <mat-option
                  *ngFor="let printerName of filteredPrinterNames$ | async"
                  [value]="printerName"
                >
                  {{ printerName }}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <div>
              <p>Price: {{ printerPrice }}</p>
            </div>
            <span
              *ngIf="
                editPackageForm.controls['printer'].invalid &&
                editPackageForm.controls['printer'].touched
              "
              class="form-text text-danger"
            >
              Printer is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package Duration</h5>
            <input
              formControlName="packageDuration"
              class="form-control"
              type="number"
              placeholder="Duracion del paquete en meses"
              [class.is-invalid]="
                editPackageForm.controls['packageDuration'].invalid &&
                editPackageForm.controls['packageDuration'].touched
              "
            />
            <span
              *ngIf="
                editPackageForm.controls['packageDuration'].invalid &&
                editPackageForm.controls['packageDuration'].touched
              "
              class="form-text text-danger"
            >
              Package Duration is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package Start Date</h5>
            <input
              formControlName="packageStartDate"
              class="form-control"
              type="date"
              [class.is-invalid]="
                editPackageForm.controls['packageStartDate'].invalid &&
                editPackageForm.controls['packageStartDate'].touched
              "
            />
            <span
              *ngIf="
                editPackageForm.controls['packageStartDate'].invalid &&
                editPackageForm.controls['packageStartDate'].touched
              "
              class="form-text text-danger"
            >
              Package Start Date is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package End Date</h5>
            <input
              formControlName="packageEndDate"
              class="form-control"
              type="date"
              [class.is-invalid]="
                editPackageForm.controls['packageEndDate'].invalid &&
                editPackageForm.controls['packageEndDate'].touched
              "
            />
            <span
              *ngIf="
                editPackageForm.controls['packageEndDate'].invalid &&
                editPackageForm.controls['packageEndDate'].touched
              "
              class="form-text text-danger"
            >
              Package End Date is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package Price</h5>
            <div class="package-price-item">
              <input
                formControlName="packagePrice"
                class="form-control"
                type="number"
                step="0.01"
                [class.is-invalid]="
                  editPackageForm.controls['packagePrice'].invalid &&
                  editPackageForm.controls['packagePrice'].touched
                "
              />
              <button
                class="button button-secondary button-icon"
                (click)="calculatePercentage()"
              >
                Calculate Discount
              </button>
            </div>
            <span
              *ngIf="
                editPackageForm.controls['packagePrice'].invalid &&
                editPackageForm.controls['packagePrice'].touched
              "
              class="form-text text-danger"
            >
              Package Price is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package Discount Percentage</h5>
            <div class="package-price-item">
              <input
                formControlName="packageDiscountPercentage"
                class="form-control"
                type="number"
                step="0.01"
                [class.is-invalid]="
                  editPackageForm.controls['packageDiscountPercentage']
                    .invalid &&
                  editPackageForm.controls['packageDiscountPercentage'].touched
                "
              />
              <button
                class="button button-secondary button-icon"
                (click)="calculatePrice()"
              >
                Calculate Price
              </button>
            </div>
            <span
              *ngIf="
                editPackageForm.controls['packageDiscountPercentage'].invalid &&
                editPackageForm.controls['packageDiscountPercentage'].touched
              "
              class="form-text text-danger"
            >
              Package Discount Percentage is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package Description</h5>
            <textarea
              formControlName="packageDescription"
              class="form-control"
              rows="5"
              [class.is-invalid]="
                editPackageForm.controls['packageDescription'].invalid &&
                editPackageForm.controls['packageDescription'].touched
              "
            ></textarea>
            <span
              *ngIf="
                editPackageForm.controls['packageDescription'].invalid &&
                editPackageForm.controls['packageDescription'].touched
              "
              class="form-text text-danger"
            >
              Package Description is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package Prints</h5>
            <input
              formControlName="packagePrints"
              class="form-control"
              type="number"
              [class.is-invalid]="
                editPackageForm.controls['packagePrints'].invalid &&
                editPackageForm.controls['packagePrints'].touched
              "
            />
            <span
              *ngIf="
                editPackageForm.controls['packagePrints'].invalid &&
                editPackageForm.controls['packagePrints'].touched
              "
              class="form-text text-danger"
            >
              Package Prints is required.
            </span>
          </div>
          <div class="packages-data-item">
            <h5>Package Extra Click Price</h5>
            <input
              formControlName="packageExtraClickPrice"
              class="form-control"
              type="number"
              step="0.01"
              [class.is-invalid]="
                editPackageForm.controls['packageExtraClickPrice'].invalid &&
                editPackageForm.controls['packageExtraClickPrice'].touched
              "
            />
            <span
              *ngIf="
                editPackageForm.controls['packageExtraClickPrice'].invalid &&
                editPackageForm.controls['packageExtraClickPrice'].touched
              "
              class="form-text text-danger"
            >
              Package Extra Click Price is required.
            </span>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
